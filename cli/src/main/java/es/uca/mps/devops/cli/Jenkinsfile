pipeline
{
	agent any
	stage
	{
		stage('checkout codebase')
		{
			steps
			{
				cleanWs()
				checkout scm: [$class: 'GitSCM', branches: [[name: '*/master']],
				userRemoteConfigs: [[url: 'https://github.com/luisroblessorroche/Calculadora.git']]
			}
		
		}
		stage('Test')
		{
			steps
			{
				sh 'cd src/ ; java -jar' ../cli/src/test/java/es/uca/mps/devops/cli/AppTest.java -cp "." --scan-classpsth'
			}
		}
		stage('Deploy')
		{
			steps
			{
				sh 'cd src/ ; java App'
			}
		}
	}
}